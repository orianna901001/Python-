從資料異常的狀態看分為兩種：

一種是「偽異常」，這些異常是由於業務特定運營動作產生的，其實是正常反映業務狀態，而不是資料本身的異常規律。 eg：雙11購物節當天網站流量突然暴增。若單純用平日流量平均來看會覺得是異常，但其實這是促銷活動帶來的正常現象。
一種是「真異常」，這些異常並不是由於特定的業務動作引起的，而是客觀地反映了資料本身分佈異常的分佈個案。 eg：某筆訂單的價格為負值（-100 元），明顯是輸入錯誤。

為什麼會出現異常值？
1. 數據輸入錯誤
2. 測量誤差
3. 故意離群：這個通常在進行問卷調研時問題設計不合理或過於敏感出現的。例如在調查用戶年收入時，可能會有很多用戶故意報低或報高。
4. 抽樣錯誤
5. 自然異常值：異常值出現的原因不是人工造成的。例如在做用戶價值分析時，通常會發現前 10% 的用戶消費金額遠遠高於其他用戶，這時候這部分用戶可以單獨取出做分析。

以下幾種情況下，我們無須對異常值做拋棄處理
1.  異常值正常反映了真實的結果
例如：由業務部門的特定動作導致的資料分佈異常，如果拋棄異常值將導致無法正確反饋業務結果。

2.  異常檢測模型
異常檢測模型是針對整體樣本中的異常資料進行分析和挖掘，以便找到其中的異常個案和規律，這種資料應用圍繞異常值展開，因此異常值不能做拋棄處理。

3.  包容異常值的資料建模
如果資料演算法和模型對異常值不敏感，那麼即使不處理異常值也不會對模型本身造成負面影響，ex：決策樹。

異常值的判別方法 1 - 簡單統計分析   -> 對屬性值進行一個描述性的統計（規定範圍），從而檢視哪些值是不合理的（範圍以外的值）eg 儀器量測出來的數值，超過儀器的規格。
新增異常值的判別方法 2 - 3σ 原則 -> 距離平均值 3σ 之外的概率為 P(|x-μ|>3σ) ≦ 0.003  當樣本距離平均值大於 3σ，認為該樣本為異常值。 
異常值的判別方法 3 - 盒鬚圖判別法 -> IQR(內四分位距) = Q3-Q1 一般而言 d 取 1.5，根據不同資料特性 調整 d 的大小， 1.5xIQR籬笆之外為異常值

異常值的處理方法
1. 刪除異常值：如果異常值是由於數據輸入錯誤、數據處理錯誤或異常值數目很少，我們可以刪除它們。
2. 數據轉換 : 轉換數據也可以剔除異常值，例如對數據取對數可以減少極端值的變化。
3. 聚類：我們也可以用決策樹直接處理帶有異常值的數據（決策樹基本不會受到異常值和缺失值的影響），或是對不同的觀測值分配權重。
4. 替換：在替換前需判斷為真異常還是偽異常，如果是真異常，類似替換缺失值，我們也可以替換異常值。我們可以使用均值、中位數、眾數替換方法。
5. 分離對待：如果異常值的數目比較多，在統計模型中我們應該對它們分別處理。一個處理方法是異常值一組，正常值一組，然後分別建立模型，最後對結果進行合併。


df_train['Age'].describe()
out_index=outliers_z_score(df_train['Age'],3)
out_index2=outliers_iqr(df_train['Age'],1.5)
